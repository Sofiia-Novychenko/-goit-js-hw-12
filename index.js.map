{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["//* зберігай функції для HTTP-запитів.\n\nimport axios from 'axios';\n\nconst SEARCH_URL = 'https://pixabay.com/api/';\nconst MY_KEY = '48325012-3ccc1b5d8b9c25a12d61b57d7';\n\nexport const fetchPhotosByQuery = (query, currentPage) => {\n  const axiousParams = {\n    params: {\n      key: MY_KEY,\n      q: query,\n      page: currentPage,\n      per_page: 15,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  };\n\n  return axios.get(`${SEARCH_URL}`, axiousParams);\n};\n","//* створи функції для відображення елементів інтерфейсу.\nexport const createGalleryCardTemplate = arr => {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img \n\t\t\tclass=\"gallery-img\" \n\t\t\tsrc=\"${webformatURL}\" \n\t\t\talt=\"${tags}\" \n\t\t\t/>\n\t</a>\n    <ul class=\"gallery-info-list\">\n                    <li class=\"info-list-item\">\n                        <h2 class=\"info-list-title\">Likes:</h2>\n                        <p class=\"info-list-text\">${likes}</p>\n                    </li>\n                    <li class=\"inform-item\">\n                        <h2 class=\"info-list-title\">Views:</h2>\n                        <p class=\"info-list-text\">${views}</p>\n                    </li>\n                    <li class=\"info-list-item\">\n                        <h2 class=\"info-list-title\">Comments:</h2>\n                        <p class=\"info-list-text\">${comments}</p>\n                    </li>\n                    <li class=\"info-list-item\">\n                        <h2 class=\"info-list-title\">Downloads:</h2>\n                        <p class=\"info-list-text\">${downloads}</p>\n                    </li>\n                </ul>\n    </li>\n    `\n    )\n    .join('');\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchPhotosByQuery } from './js/pixabay-api.js';\nimport { createGalleryCardTemplate } from './js/render-functions.js';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-load-more');\n\nlet page = 1;\nlet userInputValue = ' ';\n//* аби і в OnSearchFormSubmit і в OnSearchFormSubmit передавалось одне пошукове слово\nlet per_page = 15;\n\nloader.style.display = 'none';\n\n// ініціалізація модального вікна галереї\nconst galleryModal = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  className: 'simple-lightbox',\n});\n\nconst OnSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    userInputValue = event.currentTarget.elements.user_query.value.trim();\n\n    galleryEl.innerHTML = ' ';\n\n    if (userInputValue === '') {\n      iziToast.warning({\n        title: 'Caution',\n        message: 'You forgot important data',\n        position: 'topRight',\n      });\n\n      return;\n    }\n\n    loader.style.display = 'block';\n\n    // * аби запит йшов за першою групою і кнопка ще не показувалась\n    page = 1;\n    loadMoreBtn.classList.add('is-hidden');\n\n    const { data } = await fetchPhotosByQuery(userInputValue, page);\n\n    if (data.total === 0) {\n      iziToast.error({\n        title: '',\n        messageColor: '#FFFFFF',\n        messageSize: 16,\n        messageLineHeight: 1.5,\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n\n      galleryEl.innerHTML = ' ';\n      searchFormEl.reset();\n      return;\n    }\n\n    if (data.totalHits > 1) {\n      loadMoreBtn.classList.remove('is-hidden');\n\n      loadMoreBtn.addEventListener('click', onLoadBtnClick);\n    }\n\n    galleryEl.insertAdjacentHTML(\n      'beforeend',\n      createGalleryCardTemplate(data.hits)\n    );\n\n    galleryModal.refresh();\n\n    loader.style.display = 'none';\n\n    event.target.reset();\n  } catch (err) {\n    console.log(err.message);\n  }\n};\n\nsearchFormEl.addEventListener('submit', OnSearchFormSubmit);\n\nconst onLoadBtnClick = async event => {\n  try {\n    page++;\n\n    loader.style.display = 'block';\n\n    const { data } = await fetchPhotosByQuery(userInputValue, page);\n\n    galleryEl.insertAdjacentHTML(\n      'beforeend',\n      createGalleryCardTemplate(data.hits)\n    );\n\n    loader.style.display = 'none';\n\n    // * реалізація повільного прокручення\n    const galleryItemEL = document.querySelector('.gallery-item');\n    const cardHeight = galleryItemEL.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n    // *\n\n    // * перевірка кінця колекції\n\n    if (page * per_page >= data.totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      loadMoreBtn.removeEventListener('click', onLoadBtnClick);\n\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results\",\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n"],"names":["SEARCH_URL","MY_KEY","fetchPhotosByQuery","query","currentPage","axiousParams","axios","createGalleryCardTemplate","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchFormEl","galleryEl","loader","loadMoreBtn","page","userInputValue","per_page","galleryModal","SimpleLightbox","OnSearchFormSubmit","event","iziToast","data","onLoadBtnClick","err","cardHeight","error"],"mappings":"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"}